(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))g(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&g(l)}).observe(document,{childList:!0,subtree:!0});function d(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function g(o){if(o.ep)return;o.ep=!0;const c=d(o);fetch(o.href,c)}})();function P(r,u,d,g){return{getTitle:()=>r,getDescription:()=>u,getIsCompleted:()=>d,getId:()=>g,toggleTaskCompletion:()=>d=!d}}function S(r,u,d,g,o,c){let l=[P("Get ready","Review your tasks for the day",!0,"1"),P("Emails","Read and reply for your emails",!1,"2"),P("Workout","Swim 2km in open water",!0,"3"),P("Prepare for presentation","Read through your slides and organize your thoughts",!1,"4")];return{getId:()=>c,getDueDate:()=>o,addTask:f=>l.push(f),deleteTask:f=>{l=l.filter(h=>h.getId()!==f)},getTasks:()=>[...l],getIconUrl:()=>r,getPriority:()=>g==="1"?"high-priority":g==="2"?"medium-priority":"low-priority",getDescription:()=>d,getTitle:()=>u,toggleTaskCompletion:f=>{l.find(h=>h.getId()===f).toggleTaskCompletion(f)}}}const m=(()=>{let r=[S("https://d1yhils6iwh5l5.cloudfront.net/charts/resized/63221/normal/z_hedgeye_goos.png","Save the birds","Create an animal shelter where birds can be treated till they are ready to go back to the wild.","1","2023-07-05","1"),S("https://thumbnails.cbc.ca/maven_legacy/thumbnails/488/667/national1_2500kbps_852x480_1006631491920.jpg?crop=1.777xh:h;*,*&downsize=560px:*","Kayak championship","Follow the daily workout plan and diet.","2","2023-08-11","2")];return{saveProject:()=>{const s=document.querySelector("form#project"),a=s.querySelector("#dialog-project-title").value,p=s.querySelector("#dialog-project-description").value,k=s.querySelector("#dialog-project-icon-url").value,y=s.querySelector('dialog input[type="radio"][name="priority"]:checked').value,I=s.querySelector('dialog input[type="date"]').value,E=Math.random().toString();return a&&p&&y&&k?r.push(S(k,a,p,y,I,E)):console.log("All fields must be provided"),r},getProjectWithId:s=>r.find(a=>a.getId()===s),saveTask:s=>{const a=document.querySelector("form#task"),p=a.querySelector("#dialog-task-title").value,k=a.querySelector("#dialog-task-description").value,y=Math.random().toString();return p&&k?s.addTask(P(p,k,!1,y)):console.log("All fields must be provided"),s.getTasks()},getProjects:()=>[...r],deleteTask:(s,a)=>{r.find(p=>p.getId()===s).deleteTask(a)},deleteProject:s=>{r=r.filter(a=>a.getId()!==s)},toggleTaskCompletion:(s,a)=>{r.find(p=>p.getId()===s).toggleTaskCompletion(a)}}})(),A=(()=>{const r=document.querySelector("main"),u=document.querySelector("#project-dialog"),d=document.querySelector("#task-dialog"),g="data-project-id",o="data-task-id",c=e=>{r.replaceChildren([]);for(const t of e){const n=document.createElement("div");n.classList.add("project",`${t.getPriority()}`),n.id=t.getId(),n.innerHTML=`
            <img class="icon" src="${t.getIconUrl()}" alt="random image"/>
            <div class="card-info">
              <h2 class="card-title">${t.getTitle()}</h2>
              <p class="description">${t.getDescription()}</p>
              <span class="due-date">Due date: ${t.getDueDate()}</span>
            </div>
            `;const i=document.createElement("button");i.textContent="X",i.classList.add("delete-project"),i.addEventListener("click",j=>k(j,t.getId())),n.append(i),n.addEventListener("click",D),r.append(n)}},l=e=>{const t=document.createElement("ul");t.classList.add("task-list");const n=e.getTasks();for(const T of n){const C=document.createElement("li");C.classList.add("task");const v=document.createElement("div");v.setAttribute(o,T.getId()),v.classList.add("task-content"),v.innerHTML=`
              <h3>${T.getTitle()}</h3>
              <p>${T.getDescription()}</p>
            `,T.getIsCompleted()&&v.classList.add("completed"),v.addEventListener("click",B=>_(e.getId(),B));const L=document.createElement("button");L.classList.add("delete-task"),L.textContent="X",L.addEventListener("click",B=>I(e.getId(),T.getId())),C.append(v,L),t.append(C)}const i=document.createElement("div");i.setAttribute(g,e.getId()),i.classList.add("project-tasks");const j=document.createElement("h2");j.textContent=e.getTitle();const b=document.createElement("div");return b.classList.add("task-buttons"),b.append(E(),y()),i.append(j,t,b),i},D=e=>{const t=e.currentTarget.id,n=m.getProjectWithId(t);r.replaceChildren(l(n))},s=(e,t)=>{const n=m.getProjectWithId(t);r.replaceChildren(l(n))},a=()=>{u.showModal()},p=()=>{u.close()},k=(e,t)=>{e.stopPropagation(),m.deleteProject(t),c(m.getProjects())},y=()=>{const e=document.createElement("button");return e.textContent="Add Task",e.addEventListener("click",w),e},I=(e,t)=>{m.deleteTask(e,t);const n=m.getProjectWithId(e).getTasks();s(n,e)},E=()=>{const e=document.createElement("button");return e.textContent="Go Back",e.addEventListener("click",q),e},q=e=>{e.preventDefault(),d.close(),c(m.getProjects())},w=e=>{e.preventDefault(),d.showModal()},f=e=>{e.preventDefault(),d.close()},h=e=>{e.preventDefault();const t=m.saveProject();c(t),u.close()},W=e=>{e.preventDefault();const n=document.querySelector(`div[${g}]`).getAttribute(g),i=m.saveTask(m.getProjectWithId(n));s(i,n),d.close()},_=(e,t)=>{const n=t.currentTarget;n.classList.toggle("completed");const i=n.getAttribute(o);m.toggleTaskCompletion(e,i)};return{assignEventListeners:()=>{document.querySelector("button#new-button").addEventListener("click",a),document.querySelector("button#project-dialog-cancel").addEventListener("click",p),document.querySelector("button#project-dialog-save").addEventListener("click",h),document.querySelector("button#task-dialog-cancel").addEventListener("click",f),document.querySelector("button#task-dialog-save").addEventListener("click",W)},displayProjects:c}})();document.querySelector("#app");A.assignEventListeners();A.displayProjects(m.getProjects());
